const TelegramBot = require("node-telegram-bot-api");
require("dotenv").config();

// === Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ð±Ð¾Ñ‚Ð° Ñ‡ÐµÑ€ÐµÐ· polling
const bot = new TelegramBot(process.env.token, { polling: true });

const blocks = {
  neck: [
    "ðŸ” ÐÐ°ÐºÐ»Ð¾Ð½Ñ‹ Ð³Ð¾Ð»Ð¾Ð²Ñ‹ Ð²Ð¿ÐµÑ€Ñ‘Ð´ Ð¸ Ð½Ð°Ð·Ð°Ð´ â€” Ð¿Ð¾ 10 Ñ€Ð°Ð·",
    "ðŸ” ÐÐ°ÐºÐ»Ð¾Ð½Ñ‹ Ð³Ð¾Ð»Ð¾Ð²Ñ‹ Ð²Ð»ÐµÐ²Ð¾ Ð¸ Ð²Ð¿Ñ€Ð°Ð²Ð¾ â€” Ð¿Ð¾ 10 Ñ€Ð°Ð·",
    "ðŸ”„ ÐšÑ€ÑƒÐ³Ð¾Ð²Ñ‹Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð¿Ð»ÐµÑ‡Ð°Ð¼Ð¸ â€” 10 Ñ€Ð°Ð·",
    "ðŸ”„ ÐœÐµÐ´Ð»ÐµÐ½Ð½Ñ‹Ðµ ÐºÑ€ÑƒÐ³Ð¸ Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð¹ â€” Ð¿Ð¾ 5 Ñ€Ð°Ð· Ð² ÐºÐ°Ð¶Ð´ÑƒÑŽ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñƒ",
    "ðŸ“ ÐÐ°ÐºÐ»Ð¾Ð½Ð¸Ñ‚Ðµ Ð³Ð¾Ð»Ð¾Ð²Ñƒ Ðº Ð¿Ð»ÐµÑ‡Ñƒ Ð¸ Ð·Ð°Ð´ÐµÑ€Ð¶Ð¸Ñ‚ÐµÑÑŒ Ð½Ð° 5 ÑÐµÐºÑƒÐ½Ð´. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ 3 Ñ€Ð°Ð·Ð° Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹",
    "ðŸ§  Ð”Ð°Ð²Ð¸Ñ‚Ðµ Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð¹ Ð½Ð°Ð·Ð°Ð´ Ð½Ð° Ñ€ÑƒÐºÐ¸, Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ðµ Ð½Ð° Ð·Ð°Ñ‚Ñ‹Ð»Ð¾Ðº (5 ÑÐµÐºÑƒÐ½Ð´). ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ 3 Ñ€Ð°Ð·Ð°",
  ],
  eyes: [
    "ðŸ‘€ ÐŸÐµÑ€ÐµÐ²Ð¾Ð´Ð¸Ñ‚Ðµ Ð²Ð·Ð³Ð»ÑÐ´ Ð²Ð²ÐµÑ€Ñ…-Ð²Ð½Ð¸Ð· â€” 10 Ñ€Ð°Ð·",
    "ðŸ‘€ Ð’Ð»ÐµÐ²Ð¾-Ð²Ð¿Ñ€Ð°Ð²Ð¾ â€” 10 Ñ€Ð°Ð·",
    "ðŸ”„ ÐšÑ€ÑƒÐ³Ð¾Ð²Ñ‹Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð³Ð»Ð°Ð·Ð°Ð¼Ð¸ â€” 5 Ñ€Ð°Ð· Ð¿Ð¾ Ñ‡Ð°ÑÐ¾Ð²Ð¾Ð¹, 5 â€” Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²",
    "âœ¨ Ð‘Ñ‹ÑÑ‚Ñ€Ð¾ Ð¼Ð¾Ñ€Ð³Ð°Ð¹Ñ‚Ðµ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 30 ÑÐµÐºÑƒÐ½Ð´",
    "ðŸŒ³ ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð² Ð¾ÐºÐ½Ð¾ Ð½Ð° Ð´Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ â€” 20 ÑÐµÐºÑƒÐ½Ð´, Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ 3 Ñ€Ð°Ð·Ð°",
    "ðŸ’ª Ð¡Ð¸Ð»ÑŒÐ½Ð¾ Ð·Ð°Ð¶Ð¼ÑƒÑ€ÑŒÑ‚Ðµ Ð³Ð»Ð°Ð·Ð° Ð½Ð° 3 ÑÐµÐºÑƒÐ½Ð´Ñ‹, Ð·Ð°Ñ‚ÐµÐ¼ Ñ€Ð°ÑÑÐ»Ð°Ð±ÑŒÑ‚ÐµÑÑŒ. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ 5 Ñ€Ð°Ð·",
  ],
  back: [
    "ðŸ§â€â™‚ï¸ Ð’ÑÑ‚Ð°Ð½ÑŒÑ‚Ðµ, ÑÐ´ÐµÐ»Ð°Ð¹Ñ‚Ðµ Ð½Ð°ÐºÐ»Ð¾Ð½Ñ‹ Ð²Ð¿ÐµÑ€Ñ‘Ð´ â€” 10 Ñ€Ð°Ð·",
    "ðŸª‘ Ð¡Ð¸Ð´Ñ Ð½Ð° ÑÑ‚ÑƒÐ»Ðµ, Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ñ‹ ÐºÐ¾Ñ€Ð¿ÑƒÑÐ° Ð²Ð»ÐµÐ²Ð¾ Ð¸ Ð²Ð¿Ñ€Ð°Ð²Ð¾ â€” 10 Ñ€Ð°Ð·",
    "ðŸ’ª Ð’Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð¿Ð»ÐµÑ‡Ð°Ð¼Ð¸ â€” 6â€“8 Ð² Ð¾Ð´Ð½Ñƒ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñƒ, Ð·Ð°Ñ‚ÐµÐ¼ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾",
    "ðŸŒ€ Ð’Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ñ€ÑƒÐºÐ°Ð¼Ð¸ â€” 6â€“8 Ð² Ð¾Ð´Ð½Ñƒ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñƒ, Ð·Ð°Ñ‚ÐµÐ¼ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾",
    "ðŸ¤² Ð¡Ð³Ð¸Ð±Ð°Ð¹Ñ‚Ðµ Ñ€ÑƒÐºÐ¸ Ñ Ñ€Ð°Ð·Ð¶Ð¸Ð¼Ð°Ð½Ð¸ÐµÐ¼ Ð¿Ð°Ð»ÑŒÑ†ÐµÐ² â€” 10â€“12 Ñ€Ð°Ð·",
    "â†© ÐŸÐ¾Ð²Ð¾Ñ€Ð¾Ñ‚Ñ‹ ÐºÐ¾Ñ€Ð¿ÑƒÑÐ° Ñ ÑÐ¾Ð³Ð½ÑƒÑ‚Ñ‹Ð¼Ð¸ Ñ€ÑƒÐºÐ°Ð¼Ð¸ â€” 10â€“12 Ñ€Ð°Ð·",
    "ðŸ§Žâ€â™‚ï¸ ÐÐ°ÐºÐ»Ð¾Ð½Ñ‹ Ñ ÐºÐ°ÑÐ°Ð½Ð¸ÐµÐ¼ Ð±ÐµÐ´ÐµÑ€ â€” 8â€“10 Ñ€Ð°Ð·",
  ],
  breathing: [
    "ðŸŒ¬ Ð£Ð¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ðµ 4-7-8: Ð²Ð´Ð¾Ñ… Ð½Ð° 4 ÑÐµÐºÑƒÐ½Ð´Ñ‹, Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ° Ð½Ð° 7, Ð²Ñ‹Ð´Ð¾Ñ… Ð½Ð° 8. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ 3â€“4 Ñ€Ð°Ð·Ð°.",
    "ðŸ« Ð“Ð»ÑƒÐ±Ð¾ÐºÐ¾Ðµ Ð´Ñ‹Ñ…Ð°Ð½Ð¸Ðµ Ð¶Ð¸Ð²Ð¾Ñ‚Ð¾Ð¼: Ð¿Ð¾Ð»Ð¾Ð¶Ð¸Ñ‚Ðµ Ñ€ÑƒÐºÑƒ Ð½Ð° Ð¶Ð¸Ð²Ð¾Ñ‚ Ð¸ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ Ð²Ð´Ñ‹Ñ…Ð°Ð¹Ñ‚Ðµ Ñ‡ÐµÑ€ÐµÐ· Ð½Ð¾Ñ. Ð—Ð°Ñ‚ÐµÐ¼ Ð²Ñ‹Ð´Ð¾Ñ… Ñ‡ÐµÑ€ÐµÐ· Ñ€Ð¾Ñ‚. 5 Ñ€Ð°Ð·.",
    "ðŸ§˜â€â™‚ï¸ Ð”Ñ‹Ñ…Ð°Ð½Ð¸Ðµ ÐºÐ²Ð°Ð´Ñ€Ð°Ñ‚Ð¾Ð¼: Ð²Ð´Ð¾Ñ… â€” 4 ÑÐµÐº, Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ° â€” 4, Ð²Ñ‹Ð´Ð¾Ñ… â€” 4, Ð¿Ð°ÑƒÐ·Ð° â€” 4. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ 4 Ñ†Ð¸ÐºÐ»Ð°.",
    "ðŸ˜®â€ðŸ’¨ ÐžÑÐ¾Ð·Ð½Ð°Ð½Ð½Ð¾Ðµ Ð´Ñ‹Ñ…Ð°Ð½Ð¸Ðµ: ÑÐ¾ÑÑ€ÐµÐ´Ð¾Ñ‚Ð¾Ñ‡ÑŒÑ‚ÐµÑÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ð´Ñ‹Ñ…Ð°Ð½Ð¸Ð¸. ÐœÐµÐ´Ð»ÐµÐ½Ð½Ð¾ Ð²Ð´Ð¾Ñ…Ð½Ð¸Ñ‚Ðµ Ð¸ Ð²Ñ‹Ð´Ð¾Ñ…Ð½Ð¸Ñ‚Ðµ. 2â€“3 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹.",
    "ðŸ” ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð¾Ðµ Ð´Ñ‹Ñ…Ð°Ð½Ð¸Ðµ: Ð·Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð¿Ñ€Ð°Ð²ÑƒÑŽ Ð½Ð¾Ð·Ð´Ñ€ÑŽ, Ð²Ð´Ð¾Ñ… Ð»ÐµÐ²Ð¾Ð¹, Ð·Ð°Ñ‚ÐµÐ¼ Ð½Ð°Ð¾Ð±Ð¾Ñ€Ð¾Ñ‚. 5 Ñ†Ð¸ÐºÐ»Ð¾Ð².",
  ],
};

bot.onText(/\/start/, (msg) => {
  bot.sendMessage(msg.chat.id, `ÐŸÑ€Ð¸Ð²ÐµÑ‚, ${msg.from.first_name || "Ð´Ñ€ÑƒÐ³"}! âœ¨\nÐ’Ñ‹Ð±ÐµÑ€Ð¸ Ð·Ð¾Ð½Ñƒ Ð´Ð»Ñ Ñ€Ð°Ð·Ð¼Ð¸Ð½ÐºÐ¸:`, {
    reply_markup: {
      inline_keyboard: [
        [{ text: "ðŸ§  Ð¨ÐµÑ", callback_data: "neck" }],
        [{ text: "ðŸ‘ï¸ Ð“Ð»Ð°Ð·Ð°", callback_data: "eyes" }],
        [{ text: "ðŸ§â€â™‚ï¸ Ð¡Ð¿Ð¸Ð½Ð°", callback_data: "back" }],
        [{ text: "ðŸ« Ð”Ñ‹Ñ…Ð°Ð½Ð¸Ðµ", callback_data: "breathing" }]
      ]
    }
  });
});

bot.on("callback_query", async (query) => {
  const chatId = query.message.chat.id;
  const type = query.data;
  const block = blocks[type];

  await bot.answerCallbackQuery(query.id);

  if (!block) return;

  await bot.sendMessage(chatId, `ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ñ€Ð°Ð·Ð¼Ð¸Ð½ÐºÑƒ Ð´Ð»Ñ: ${type}`);

  for (const step of block) {
    await bot.sendMessage(chatId, step);
    await new Promise((res) => setTimeout(res, 2000));
  }
});
